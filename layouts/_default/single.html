{{ define "main" }}
    <div class="post {{ with .Site.Params.doNotLoadAnimations }} . {{ else }} animated fadeInDown {{ end }}">
        <div class="post-content">
            <div class="post-title">
                {{ $img_name := split .File.LogicalName "." }}
                {{ $img_name := index $img_name 0 }}
                {{ $img_loc := print "/image/post/preview/" $img_name ".png" }}
                {{ if $img_loc | fileExists }}
                <img src="{{ $img_loc }}" width="320" height="240" style="float: right; padding: 15px;" />
                {{ end }}
                <h3>{{ .Title }}</h3>
                {{ if eq .Type "post"}}
                    <div class="info">
                        <em class="fas fa-calendar-day"></em>
                        <span class="date">{{ .Date.Format "Mon, Jan 2, 2006" }}</span>
                        <em class="fas fa-stopwatch"></em>
                        <span class="reading-time">{{ i18n "reading_time" .ReadingTime }}</span>
                    </div>
                {{ end }}
            </div>
            {{ $summary_splits := split .Content "thisisthestartofsummary" }}
            {{ if eq (len $summary_splits) 2 }}
            <!-- If that endtoc special comment is present, output only the part after that comment as Summary. -->
            {{ index $summary_splits 0 | safeHTML }}
            {{ index $summary_splits 1 | safeHTML}}
            {{ else }}
            <!-- Print the whole Summary if endtoc special comment is not found. -->
            {{ .Content }}
            {{ end }}
        </div>
        <div class="post-footer">
            <div class="info">
                {{ with .Page.Params.Categories }}{{ partial "taxonomy/categories.html" . }}{{ end }}
                {{ with .Page.Params.Tags }}{{ partial "taxonomy/tags.html" . }}{{ end }}
            </div>
        </div>

        {{ if eq .Type "post"}}
            {{ if .Site.DisqusShortname -}}
                <div id="fb_comments_container">
                    <h2>{{ i18n "comments" }}</h2>
                    {{ template "_internal/disqus.html" . }}
                </div>
            {{- end }}
        {{ end }}
    </div>

{{ end }}
